## Firewall ##

### Autostart iptables ###
```
sudo sh -c "iptables-save > /etc/network/iptables"
sudo touch /etc/network/if-pre-up.d/iptables
sudo chmod +x /etc/network/if-pre-up.d/iptables
```

sudo nano /etc/network/if-pre-up.d/iptables
```
#!/bin/sh
/sbin/iptables-restore /etc/network/iptables
```
### Test/Show ###
Für Fehlersuche alle Regeln bis zum nächsten Neustart disablen: sudo iptables -F
Anzeige aktive Table: sudo iptables -L -v
Log controllieren: tailf /var/log/kern.log

### Beispiel ###
```
# Generated by iptables-save v1.6.0 on Sun Dec  3 15:10:28 2017
*filter
:INPUT DROP [0:0]
:FORWARD DROP [0:0]
:OUTPUT ACCEPT [0:0]
-A INPUT -i lo -j ACCEPT
-A INPUT -p tcp -m tcp ! --tcp-flags FIN,SYN,RST,ACK SYN -m state --state NEW -j DROP
-A INPUT -f -j DROP
-A INPUT -p icmp -j ACCEPT
-A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT
-A INPUT -p gre -j ACCEPT
-A INPUT -p tcp -m state --state NEW -m tcp --dport 22 -j ACCEPT
-A INPUT -p tcp -m state --state NEW -m tcp --dport 3389 -j ACCEPT
-A INPUT -j REJECT --reject-with icmp-host-prohibited
COMMIT
# Completed on Sun Dec  3 15:10:28 2017
# Generated by iptables-save v1.6.0 on Sun Dec  3 15:10:28 2017
*nat
:PREROUTING ACCEPT [0:0]
:INPUT ACCEPT [0:0]
:OUTPUT ACCEPT [0:0]
:POSTROUTING ACCEPT [0:0]
-A POSTROUTING -o eth0 -j MASQUERADE
-A POSTROUTING -o eth0 -j MASQUERADE
-A POSTROUTING -o ppp0 -j MASQUERADE
-A POSTROUTING -o wlan0 -j MASQUERADE
-A POSTROUTING -o wlan0 -j MASQUERADE
COMMIT
# Completed on Sun Dec  3 15:10:28 2017
```
